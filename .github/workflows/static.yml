<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dealership Map</title>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- Leaflet Routing Machine CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
  <style>
    #map { 
      height: 600px; 
      width: 100%; 
    }
    #controls { 
      margin: 10px 0; 
    }
    select { 
      padding: 5px; 
      font-size: 16px; 
    }
    button {
      padding: 5px 10px;
      font-size: 16px;
      margin-left: 10px;
    }
    #route-info {
      margin-top: 10px;
      font-size: 16px;
    }
    #stateFilter {
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <div id="controls">
    <label for="ownerFilter">Filter by Account Owner: </label>
    <select id="ownerFilter">
      <option value="All">All</option>
      <option value="Rachel Shifflett-Engler">Rachel Shifflett-Engler</option>
      <option value="Aram Takvoryan">Aram Takvoryan</option>
      <option value="David Savine">David Savine</option>
      <option value="Shane Marshall">Shane Marshall</option>
      <option value="Timothy Hood">Timothy Hood</option>
      <option value="Glenny Martinez">Glenny Martinez</option>
      <option value="Sandra Snyder">Sandra Snyder</option>
    </select>
    <label for="stateFilter">Filter by State: </label>
    <select id="stateFilter">
      <option value="All">All</option>
      <option value="Maryland">Maryland</option>
      <option value="Massachusetts">Massachusetts</option>
      <option value="New York">New York</option>
      <option value="Connecticut">Connecticut</option>
      <option value="Virginia">Virginia</option>
      <option value="Maine">Maine</option>
      <option value="New Jersey">New Jersey</option>
      <option value="Pennsylvania">Pennsylvania</option>
      <option value="New Hampshire">New Hampshire</option>
      <option value="Vermont">Vermont</option>
      <option value="Delaware">Delaware</option>
      <option value="Rhode Island">Rhode Island</option>
    </select>
  </div>
  <div id="map"></div>
  <div id="route-info"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Leaflet Routing Machine JS -->
  <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
  <script>
    // Initialize the map
    var map = L.map('map').setView([39.0, -76.0], 7); // Centered on Maryland/Virginia area

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Dealership data with Account Owner
    var dealerships = [
      { "name": "NISSAN OF LEXINGTON PARK", "address": "22757 Three Notch Road, California, Maryland 20619", "lat": 38.291793, "lng": -76.496049, "owner": "Rachel Shifflett-Engler" },
      { "name": "BATTLES BUICK GMC /SA10018", "address": "60 MACARTHUR BLVD, BOURNE, Massachusetts 2532", "lat": 41.738825, "lng": -70.586211, "owner": "Aram Takvoryan" },
      { "name": "NORTHSTAR KIA /SA10058", "address": "4605 NORTHERN BLVD, LONG IS CITY, New York 11101", "lat": 40.754106, "lng": -73.916054, "owner": "Shane Marshall" },
      { "name": "TODD MASERATI ALFA ROMEO OF DANBURY /SB30019", "address": "52 NEWTOWN ROAD, DANBURY, Connecticut 6810", "lat": 41.404231, "lng": -73.423698, "owner": "Glenny Martinez" },
      { "name": "WINCHESTER MITSUBISHI 9603/SM46085", "address": "3880 VALLEY PIKE, WINCHESTER, Virginia 22602", "lat": 39.120142, "lng": -78.197755, "owner": "Rachel Shifflett-Engler" },
      { "name": "BERLIN CITY NIS PORTLAND", "address": "191 RIVERSIDE STREET, PORTLAND, Maine 4103", "lat": 43.683172, "lng": -70.325518, "owner": "Aram Takvoryan" },
      { "name": "MIKE BARNEY NISSAN", "address": "3676 SHERIDAN DR, AMHERST, New York 14226", "lat": 42.979991, "lng": -78.797258, "owner": "David Savine" },
      { "name": "LIA NISSAN", "address": "2233 CENTRAL AVE, SCHENECTADY, New York 12304", "lat": 42.764563, "lng": -73.88515, "owner": "David Savine" },
      { "name": "POHANKA NISSAN", "address": "2010 N Stafford Ave, Fredericksburg, Virginia 22401", "lat": 38.319241, "lng": -77.477139, "owner": "Rachel Shifflett-Engler" },
      { "name": "PETER'S NISSAN OF NASHUA", "address": "280 AMHERST ST, NASHUA, New Hampshire 3063", "lat": 42.779215, "lng": -71.498983, "owner": "Aram Takvoryan" },
      { "name": "DARLING'S NISSAN", "address": "114 SYLVAN RD, BANGOR, Maine 4401", "lat": 44.827472, "lng": -68.745406, "owner": "Aram Takvoryan" },
      { "name": "HARTE NISSAN, INC. 2148", "address": "165 W SERVICE RD, HARTFORD, Connecticut 6120", "lat": 41.791421, "lng": -72.656637, "owner": "Aram Takvoryan" },
      { "name": "KOEPPEL NISSAN INC", "address": "74-15 Northern Blvd, Jackson Heights, New York 11372", "lat": 40.755049, "lng": -73.889567, "owner": "Shane Marshall" },
      { "name": "D'ADDARIO NISSAN 2178", "address": "329 BRIDGEPORT AVE, SHELTON, Connecticut 6484", "lat": 41.299106, "lng": -73.106602, "owner": "Aram Takvoryan" },
      { "name": "NISSAN 112 SALES CORP", "address": "730 ROUTE 112, PATCHOGUE, New York 11772", "lat": 40.793089, "lng": -73.007599, "owner": "Shane Marshall" },
      { "name": "CHERRY HILL NISSAN, INC.", "address": "2325 ROUTE 38, CHERRY HILL, New Jersey 8002", "lat": 39.939526, "lng": -75.011972, "owner": "Timothy Hood" },
      { "name": "PINE BELT AUTOMOTIVE, INC", "address": "1077 NJ-37, Toms River, New Jersey 08755", "lat": 39.975423, "lng": -74.217087, "owner": "Sandra Snyder" },
      { "name": "BARON NISSAN, INC.", "address": "235 GLEN COVE RD, GREENVALE, New York 11548", "lat": 40.817395, "lng": -73.62609, "owner": "Shane Marshall" },
      { "name": "O'NEIL NISSAN INC.", "address": "849 W STREET RD, WARMINSTER, Pennsylvania 18974", "lat": 40.210804, "lng": -75.105351, "owner": "Timothy Hood" },
      { "name": "SHULTS NISSAN SUBARU", "address": "311 FLUVANNA AVENUE, JAMESTOWN, New York 14701", "lat": 42.1156, "lng": -79.253708, "owner": "David Savine" },
      { "name": "BRUCE BENNETT NISSAN 2620", "address": "978 DANBURY RD, WILTON, Connecticut 6897", "lat": 41.260497, "lng": -73.435283, "owner": "Aram Takvoryan" },
      { "name": "LEBRUN NISSAN", "address": "396 GRANT AVE, AUBURN, New York 13021", "lat": 42.967158, "lng": -76.536192, "owner": "David Savine" },
      { "name": "FREEDOM NISSAN, INC.", "address": "1095 SHELBURNE ROAD, SOUTH BURLINGTON, Vermont 5403", "lat": 44.43866, "lng": -73.211077, "owner": "David Savine" },
      { "name": "BOB BELL CHEVROLET/NISSAN", "address": "7900 EASTERN AVE, BALTIMORE, Maryland 21224", "lat": 39.29666, "lng": -76.509134, "owner": "Rachel Shifflett-Engler" },
      { "name": "TEAM NISSAN, INC.", "address": "1715 S Delsea Dr, Vineland, New Jersey 08360", "lat": 39.460499, "lng": -75.039803, "owner": "Timothy Hood" },
      { "name": "PORT CITY NISSAN, INC.", "address": "120 SPAULDING TURNPIKE, PORTSMOUTH, New Hampshire 3801", "lat": 43.077176, "lng": -70.785076, "owner": "Aram Takvoryan" },
      { "name": "CHARLIE'S NISSAN", "address": "465 WESTERN AVE, AUGUSTA, Maine 4330", "lat": 44.320655, "lng": -69.822292, "owner": "Aram Takvoryan" },
      { "name": "SULLIVAN BROS. NISSAN INC", "address": "1 CRANBERRY RD, KINGSTON, Massachusetts 2364", "lat": 41.976651, "lng": -70.711916, "owner": "Aram Takvoryan" },
      { "name": "CONCORDVILLE NISSAN", "address": "452 Wilmington West Chester Pike, Glen Mills, Pennsylvania 19342", "lat": 39.883933, "lng": -75.525499, "owner": "Timothy Hood" },
      { "name": "TEAM NISSAN, INC.", "address": "70 KELLER STREET, MANCHESTER, New Hampshire 3103", "lat": 42.952989, "lng": -71.442584, "owner": "Aram Takvoryan" },
      { "name": "LEE NISSAN OF AUBURN", "address": "793 CENTER ST, AUBURN, Maine 4212", "lat": 44.12932, "lng": -70.223926, "owner": "Sandra Snyder" },
      { "name": "PERUZZI NISSAN, INC.", "address": "165 LINCOLN HWY, FAIRLESS HILLS, Pennsylvania 19030", "lat": 40.183221, "lng": -74.862174, "owner": "Timothy Hood" },
      { "name": "STAR NISSAN, INC.", "address": "20626 NORTHERN BLVD, BAYSIDE, New York 11361", "lat": 40.758299, "lng": -73.776397, "owner": "Shane Marshall" },
      { "name": "HERTRICH NISSAN JP-EAGLE 2979", "address": "1378 S DUPONT HWY, DOVER, Delaware 19901", "lat": 39.136508, "lng": -75.527262, "owner": "Timothy Hood" },
      { "name": "GROSSMAN CHEV-NISSAN-GEO", "address": "295 MIDDLESEX TPKE, OLD SAYBROOK, Connecticut 6475", "lat": 41.309378, "lng": -72.38324, "owner": "Sandra Snyder" },
      { "name": "SHEEHY NISSAN OF MANASSAS", "address": "9010 Liberia Avenue, Manassas, Virginia 20110", "lat": 38.760505, "lng": -77.459161, "owner": "Rachel Shifflett-Engler" },
      { "name": "GEORGE HARTE NISSAN, INC. 3033", "address": "426 DERBY AVE, WEST HAVEN, Connecticut 6516", "lat": 41.30748, "lng": -72.968258, "owner": "Aram Takvoryan" },
      { "name": "RAMSEY NISSAN, INC.", "address": "401 NJ-17, Ramsey, New Jersey 07446", "lat": 41.053514, "lng": -74.124672, "owner": "Glenny Martinez" },
      { "name": "PASSPORT NIS/MARLOW HGTS", "address": "5000 AUTH WAY, MARLOW HEIGHTS, Maryland 20746", "lat": 38.826983, "lng": -76.923503, "owner": "Rachel Shifflett-Engler" },
      { "name": "NISSAN OF TURNERSVILLE", "address": "3400 NJ-42, Turnersville, New Jersey 08012", "lat": 39.736708, "lng": -75.046493, "owner": "Timothy Hood" },
      { "name": "GATES NISSAN 3063", "address": "409 Boston Post Rd, North Windham, Connecticut 06256", "lat": 41.739234, "lng": -72.164589, "owner": "Aram Takvoryan" },
      { "name": "HILLTOP NISSAN, INC.", "address": "258 ROUTE 10, EAST HANOVER, New Jersey 7936", "lat": 40.807225, "lng": -74.371319, "owner": "Glenny Martinez" },
      { "name": "CONICELLI NISSAN", "address": "1222 W. RIDGE PIKE, CONSHOHOCKEN, Pennsylvania 19428", "lat": 40.103569, "lng": -75.310877, "owner": "Timothy Hood" },
      { "name": "HUDSON NISSAN", "address": "585 NJ-440, Jersey City, New Jersey 07305", "lat": 40.705618, "lng": -74.094398, "owner": "Glenny Martinez" },
      { "name": "TIMBROOK NISSAN", "address": "10385 Mount Savage Rd NW, Cumberland, Maryland 21502", "lat": 39.678827, "lng": -78.791183, "owner": "Sandra Snyder" },
      { "name": "ROCKLAND NISSAN 3207", "address": "608 ROUTE 303, BLAUVELT, New York 10913", "lat": 41.071018, "lng": -73.951083, "owner": "Glenny Martinez" },
      { "name": "RIVERHEAD AUTO MALL, LTD.", "address": "1800 OLD COUNTRY RD, RIVERHEAD, New York 11901", "lat": 40.924229, "lng": -72.704785, "owner": "Shane Marshall" },
      { "name": "MARC MOTORS, INC.", "address": "1744 MAIN ST, SANFORD, Maine 4073", "lat": 43.403359, "lng": -70.717896, "owner": "Aram Takvoryan" },
      { "name": "LIA NISSAN OF ENFIELD", "address": "10 Palomba Dr, Enfield, Connecticut 06082", "lat": 41.995128, "lng": -72.580395, "owner": "David Savine" },
      { "name": "PINE BELT NISSAN/KEYPORT", "address": "111 STATE ROUTE 36, KEYPORT, New Jersey 7735", "lat": 40.426642, "lng": -74.199679, "owner": "Sandra Snyder" },
      { "name": "PAUL MILLER NISSAN, LLC 3265", "address": "930 KINGS HWY E, FAIRFIELD, Connecticut 6825", "lat": 41.167258, "lng": -73.233436, "owner": "Aram Takvoryan" },
      { "name": "RON BOUCHARD NISSAN", "address": "490 OLD UNION TURN PIKE, LANCASTER, Massachusetts 1523", "lat": 42.519411, "lng": -71.700761, "owner": "Aram Takvoryan" },
      { "name": "SHERIDAN NISSAN, L.L.C.", "address": "114 S DUPONT HWY, NEW CASTLE, Delaware 19720", "lat": 39.663534, "lng": -75.605012, "owner": "Timothy Hood" },
      { "name": "KELLY NISSAN OF LYNNFIELD", "address": "271-275 BROADWAY, LYNNFIELD, Massachusetts 1940", "lat": 42.510039, "lng": -71.008848, "owner": "Aram Takvoryan" },
      { "name": "NISSAN OF MIDDLETOWN 3367", "address": "1147 NY-17M, Monroe, New York 10950", "lat": 41.334068, "lng": -74.189614, "owner": "Glenny Martinez" },
      { "name": "MARLBORO NISSAN", "address": "740 BOSTON POST ROAD, MARLBOROUGH, Massachusetts 1752", "lat": 42.351399, "lng": -71.50072, "owner": "Aram Takvoryan" },
      { "name": "QUIRK NISSAN, INC.", "address": "600 Southern Artery, Quincy, Massachusetts 02169", "lat": 42.257389, "lng": -70.975547, "owner": "Aram Takvoryan" },
      { "name": "EXECUTIVE NISSAN 3422", "address": "900 UNIVERSAL DR N, NORTH HAVEN, Connecticut 6473", "lat": 41.367288, "lng": -72.871786, "owner": "Aram Takvoryan" },
      { "name": "SHEEHY NISSAN", "address": "7232 Ritchie Highway, Glen Burnie, Maryland 21061", "lat": 39.172828, "lng": -76.619631, "owner": "Rachel Shifflett-Engler" },
      { "name": "COUNTRY NISSAN", "address": "40 Russell St, Hadley, Massachusetts 01035", "lat": 42.354827, "lng": -72.589851, "owner": "Aram Takvoryan" },
      { "name": "MONTGOMERYVILLE NISSAN", "address": "ROUTE 309 AT STUMP ROAD, MONTGOMERYVILLE, Pennsylvania 18936", "lat": 40.226105, "lng": -75.231236, "owner": "Timothy Hood" },
      { "name": "PASSPORT NIS/ALEXANDRIA", "address": "150 South Pickett Street, Alexandria, Virginia 22304", "lat": 38.809683, "lng": -77.122194, "owner": "Rachel Shifflett-Engler" },
      { "name": "NISSAN 46", "address": "1655 RT 46 EAST, LITTLE FALLS, New Jersey 7424", "lat": 40.885006, "lng": -74.216308, "owner": "Glenny Martinez" },
      { "name": "BURDICK NISSAN 3558", "address": "5885 E CIRCLE DR, CICERO, New York 13039", "lat": 43.149771, "lng": -76.113637, "owner": "David Savine" },
      { "name": "POHANKA NISSAN/SALISBURY", "address": "2012 N SALISBURY BLVD, SALISBURY, Maryland 21801", "lat": 38.392047, "lng": -75.57591, "owner": "Rachel Shifflett-Engler" },
      { "name": "ROYAL NISSAN-SUBARU", "address": "3901 ROUTE 281, CORTLAND, New York 13045", "lat": 42.596021, "lng": -76.206967, "owner": "David Savine" },
      { "name": "BALISE NIS W SPRINGFIELD", "address": "500 RIVERDALE ST, WEST SPRINGFIELD, Massachusetts 1089", "lat": 42.119728, "lng": -72.626524, "owner": "Aram Takvoryan" },
      { "name": "NISSAN OF NORWICH 3664", "address": "691 W THAMES ST, NORWICH, Connecticut 6360", "lat": 41.498578, "lng": -72.098217, "owner": "Aram Takvoryan" },
      { "name": "LEGEND NISSAN, LTD", "address": "268 JERICHO TPKE, SYOSSET, New York 11791", "lat": 40.809799, "lng": -73.507892, "owner": "Shane Marshall" },
      { "name": "SOMERSWORTH NISSAN", "address": "285 ROUTE 108, SOMERSWORTH, New Hampshire 3878", "lat": 43.257401, "lng": -70.90051, "owner": "Aram Takvoryan" },
      { "name": "DAVIDSON NISSAN, INC.", "address": "1845 Arsenal St, Watertown, New York 13601", "lat": 43.975594, "lng": -75.936058, "owner": "Sandra Snyder" },
      { "name": "MAGUIRE NISSAN", "address": "17 UPTOWN ROAD, ITHACA, New York 14850", "lat": 42.481109, "lng": -76.473009, "owner": "Sandra Snyder" },
      { "name": "SANSONE JR'S WINDSOR NISS", "address": "590 US-130, East Windsor, New Jersey 08520", "lat": 40.258648, "lng": -74.548563, "owner": "Glenny Martinez" },
      { "name": "COASTAL NISSAN", "address": "109 ACCORD PARK DR, NORWELL, Massachusetts 2061", "lat": 42.165388, "lng": -70.887773, "owner": "Aram Takvoryan" },
      { "name": "DARCARS NISSAN", "address": "15911 INDIANOLA DR, ROCKVILLE, Maryland 20855", "lat": 39.114646, "lng": -77.16124, "owner": "Rachel Shifflett-Engler" },
      { "name": "CROWLEY NISSAN 3784", "address": "1451 FARMINGTON AVE, BRISTOL, Connecticut 6010", "lat": 41.699592, "lng": -72.894572, "owner": "Glenny Martinez" },
      { "name": "ANTWERPEN NISSAN, INC.", "address": "12451 AUTO DR, CLARKSVILLE, Maryland 21029", "lat": 39.21297, "lng": -76.944371, "owner": "Rachel Shifflett-Engler" },
      { "name": "NISSAN OF QUEENS", "address": "250 NORTHERN BLVD, GREAT NECK, New York 11021", "lat": 40.776841, "lng": -73.727343, "owner": "Shane Marshall" },
      { "name": "WEST-HERR NISSAN 2965/3820", "address": "3580 SOUTHWESTERN BLVD, ORCHARD PARK, New York 14127", "lat": 42.785182, "lng": -78.765541, "owner": "David Savine" },
      { "name": "PRESTON NISSAN", "address": "4301 Preston Hwy, Preston, Maryland 21655", "lat": 38.711392, "lng": -75.912614, "owner": "Rachel Shifflett-Engler" },
      { "name": "SHEEHY NISSAN OF WALDORF", "address": "2950 Crain Highway, Waldorf, Maryland 20601", "lat": 38.629905, "lng": -76.905368, "owner": "Rachel Shifflett-Engler" },
      { "name": "COLONIAL NISSAN/MEDFORD", "address": "104 MYSTIC AVE, MEDFORD, Massachusetts 2155", "lat": 42.412452, "lng": -71.106624, "owner": "Aram Takvoryan" },
      { "name": "CENTRAL AVENUE NISSAN INC", "address": "1919 CENTRAL PARK AVE, YONKERS, New York 10710", "lat": 40.964528, "lng": -73.84033, "owner": "Glenny Martinez" },
      { "name": "YOUNGER NISSAN/FREDERICK", "address": "7418 GROVE ROAD, FREDERICK, Maryland 21704", "lat": 39.391157, "lng": -77.40777, "owner": "Rachel Shifflett-Engler" },
      { "name": "ANTWERPEN NISSAN- SECURITY", "address": "1701 Woodlawn Dr, Baltimore, Maryland 21207", "lat": 39.315996, "lng": -76.737162, "owner": "Rachel Shifflett-Engler" },
      { "name": "MASTRIA NISSAN, INC.", "address": "1305 NEW STATE HWY, RAYNHAM, Massachusetts 2767", "lat": 41.903823, "lng": -71.01751, "owner": "Aram Takvoryan" },
      { "name": "CHAPMAN NISSAN LLC", "address": "6723 ESSINGTON AVE, PHILADELPHIA, Pennsylvania 19153", "lat": 39.910652, "lng": -75.224237, "owner": "Timothy Hood" },
      { "name": "FRED BEANS NISSAN OF SACO", "address": "852 Portland Rd, Saco, Maine 04072", "lat": 43.529491, "lng": -70.401135, "owner": "Aram Takvoryan" },
      { "name": "LIA NISSAN OF SARATOGA", "address": "2906 ROUTE 9, MALTA, New York 12020", "lat": 43.018112, "lng": -73.792091, "owner": "David Savine" },
      { "name": "NISSAN OF NEW ROCHELLE", "address": "2533 PALMER AVE, NEW ROCHELLE, New York 10801", "lat": 40.919361, "lng": -73.776966, "owner": "Glenny Martinez" },
      { "name": "NISSAN 422 OF LIMERICK", "address": "55 AUTOPARK BLVD, LIMERICK, Pennsylvania 19468", "lat": 40.21746, "lng": -75.548074, "owner": "Timothy Hood" },
      { "name": "ROUTE 33 NISSAN", "address": "951 US HWY 33, HAMILTON SQUARE, New Jersey 8690", "lat": 40.22904, "lng": -74.672296, "owner": "Glenny Martinez" },
      { "name": "PRIORITY NISSAN CHANTILLY", "address": "14840 Stonecroft Center Court, Chantilly, Virginia 20151", "lat": 38.89981, "lng": -77.460338, "owner": "Rachel Shifflett-Engler" },
      { "name": "GARVEY NISSAN", "address": "2201 ROUTE 7 NORTH, RUTLAND, Vermont 5701", "lat": 43.655276, "lng": -72.987456, "owner": "David Savine" },
      { "name": "ANTWERPEN NISSAN - OWINGS MILLS", "address": "11405 REISTERSTOWN RD, OWINGS MILLS, Maryland 21117", "lat": 39.438663, "lng": -76.802583, "owner": "Rachel Shifflett-Engler" },
      { "name": "MIDDLETOWN NISSAN 5492", "address": "1153 NEWFIELD ST, MIDDLETOWN, Connecticut 6457", "lat": 41.590437, "lng": -72.676432, "owner": "Aram Takvoryan" },
      { "name": "WEST HERR NISSAN OF LOCKPORT 3064/5498", "address": "6069 S TRANSIT RD, LOCKPORT, New York 14094", "lat": 43.128535, "lng": -78.696101, "owner": "David Savine" },
      { "name": "WEST HERR NISSAN WILLIAMSVILLE 3691/5508", "address": "8137 MAIN ST, WILLIAMSVILLE, New York 14221", "lat": 42.962693, "lng": -78.691464, "owner": "David Savine" },
      { "name": "THRUWAY NISSAN 5512", "address": "79 ROUTE 17K, NEWBURGH, New York 12550", "lat": 41.499663, "lng": -74.009671, "owner": "Glenny Martinez" },
      { "name": "HUTTIG NISSAN 3697/5518", "address": "822 STATE ROUTE 3, PLATTSBURGH, New York 12901", "lat": 44.696449, "lng": -73.527455, "owner": "David Savine" },
      { "name": "NISSAN OF STATEN ISLAND", "address": "1976 HYLAN BLVD, STATEN ISLAND, New York 10306", "lat": 40.581377, "lng": -74.097758, "owner": "Shane Marshall" },
      { "name": "MAGUIRE NISSAN / SYRACUSE", "address": "716 W GENESSEE, SYRACUSE, New York 13206", "lat": 43.053818, "lng": -76.16397, "owner": "Sandra Snyder" },
      { "name": "LIA NISSAN OF GLENS FALLS", "address": "373 DIX AVENUE, QUEENSBURY, New York 12804", "lat": 43.315875, "lng": -73.608574, "owner": "David Savine" },
      { "name": "LANGWAY NISSAN OF NEWPORT", "address": "295 EAST MAIN ROAD, MIDDLETOWN, Rhode Island 2842", "lat": 41.518796, "lng": -71.291125, "owner": "Sandra Snyder" },
      { "name": "TREIBER NISSAN", "address": "320 N COMRIE AVE, JOHNSTOWN, New York 12095", "lat": 43.024936, "lng": -74.358266, "owner": "David Savine" },
      { "name": "STATELINE NISSAN", "address": "845 TAUNTON AVENUE, EAST PROVIDENCE, Rhode Island 2914", "lat": 41.822338, "lng": -71.348984, "owner": "Aram Takvoryan" },
      { "name": "REEDMAN TOLL NIS DRE HILL", "address": "5018 TOWNSHIP LINE RD, DREXEL HILL, Pennsylvania 19026", "lat": 39.955621, "lng": -75.321566, "owner": "Timothy Hood" },
      { "name": "MOUNT HOLLY NISSAN, INC.", "address": "1513 ROUTE 38, HAINESPORT, New Jersey 8036", "lat": 39.982585, "lng": -74.808775, "owner": "Timothy Hood" },
      { "name": "NUCAR NISSAN OF NORWOOD", "address": "525 BOSTON PROVIDENCE TP, NORWOOD, Massachusetts 2062", "lat": 42.192074, "lng": -71.184882, "owner": "Aram Takvoryan" },
      { "name": "NUCAR NISSAN NO ATTLEBORO", "address": "685 SOUTH WASHINGTON ST, NORTH ATTLEBORO, Massachusetts 2761", "lat": 41.960406, "lng": -71.342274, "owner": "Aram Takvoryan" },
      { "name": "SPEEDCRAFT NISSAN", "address": "885 QUAKER LANE, WEST WARWICK, Rhode Island 2893", "lat": 41.671991, "lng": -71.500542, "owner": "Aram Takvoryan" },
      { "name": "BATTLES NISSAN, LLC", "address": "60 MACARTHUR BLVD, BUZZARDS BAY, Massachusetts 2532", "lat": 41.738825, "lng": -70.586211, "owner": "Aram Takvoryan" },
      { "name": "NISSAN OF YORKTOWN HEIGHTS 5681", "address": "3495 CROMPOND RD, YORKTOWN HEIGHTS, New York 10598", "lat": 41.289484, "lng": -73.836737, "owner": "Shane Marshall" },
      { "name": "SOUTH SHORE NISSAN", "address": "200 SUNRISE HIGHWAY, AMITYVILLE, New York 11701", "lat": 40.687106, "lng": -73.4148, "owner": "Shane Marshall" },
      { "name": "DARTMOUTH NISSAN", "address": "483 STATE ROAD, NORTH DARTMOUTH, Massachusetts 2747", "lat": 41.640284, "lng": -71.005404, "owner": "Aram Takvoryan" },
      { "name": "FRED BEANS NISSAN OF FLEMINGTON 3918/5719", "address": "172 US HIGHWAY 202, FLEMINGTON, New Jersey 8822", "lat": 40.477881, "lng": -74.862833, "owner": "Timothy Hood" },
      { "name": "BOB JOHNSON NISSAN", "address": "3817 W HENRIETTA RD, ROCHESTER, New York 14623", "lat": 43.077856, "lng": -77.64315, "owner": "David Savine" },
      { "name": "VOLKSWAGEN OF FREEHOLD /SB30023", "address": "4360 US 9, FREEHOLD, New Jersey 7728", "lat": 40.282292, "lng": -74.295187, "owner": "Glenny Martinez" },
      { "name": "NISSAN OF WESTBURY", "address": "939 OLD COUNTRY ROAD, WESTBURY, New York 11590", "lat": 40.754462, "lng": -73.562166, "owner": "Shane Marshall" },
      { "name": "NISSAN CITY/PORT CHESTER", "address": "225 BOSTON POST RD, PORT CHESTER, New York 10573", "lat": 40.996315, "lng": -73.669358, "owner": "Shane Marshall" },
      { "name": "STEET PONTE NISSAN, INC.", "address": "4967 COMMERCIAL DR, YORKVILLE, New York 13495", "lat": 43.103874, "lng": -75.29904, "owner": "David Savine" },
      { "name": "MATTHEWS NISSAN WELLESLEY", "address": "960-962 WORCESTER STREET, WELLESLEY, Massachusetts 2482", "lat": 42.304006, "lng": -71.32348, "owner": "Aram Takvoryan" },
      { "name": "AUTO GIANTS NISSAN", "address": "14777 Jefferson Davis Highway, Woodbridge, Virginia 22191", "lat": 38.629317, "lng": -77.274031, "owner": "Rachel Shifflett-Engler" },
      { "name": "NISSAN OF ROCKVILLE CENTRE 4267/5917", "address": "700 Sunrise Highway, Rockville Centre, New York 11570", "lat": 40.656488, "lng": -73.625448, "owner": "Shane Marshall" },
      { "name": "AVI AUTO SALES /SB30026", "address": "430 White Horse Pike N, Magnolia, New Jersey 8107", "lat": 39.912274, "lng": -75.085035, "owner": "Timothy Hood" },
      { "name": "LUXURY MOTOR CARS LLC / SA10120", "address": "245 U.S. 22, Hillside, New Jersey 7205", "lat": 40.698906, "lng": -74.227007, "owner": "Glenny Martinez" },
      { "name": "ROCKLAND MOTORSPORTS, LLC /SB30027", "address": "138 Orange Avenue, Suffern, New York 10901", "lat": 41.114069, "lng": -74.153192, "owner": "Shane Marshall" },
      { "name": "CRABTREE NISSAN CRABTREE NISSAN 4281/5928", "address": "2191 Straits Turnpike, Middlebury, Connecticut 6762", "lat": 41.568475, "lng": -73.09911, "owner": "Glenny Martinez" },
      { "name": "MERCEDES BENZ OF DOYLESTOWN /SB30029", "address": "3664 North Easton Road, Doylestown, Pennsylvania 18902", "lat": 40.33067, "lng": -75.130533, "owner": "Timothy Hood" },
      { "name": "WALLY'S NISSAN OF LATHAM", "address": "976 Loudon Road, Latham, New York 12110", "lat": 42.76939, "lng": -73.754504, "owner": "David Savine" },
      { "name": "WALLY'S MITSUBISHI /SM35196", "address": "18822 U.S. route 11, Watertown, New York 13601", "lat": 43.938975, "lng": -75.92438, "owner": "David Savine" },
      { "name": "EDISON INFINITI", "address": "842 U.S. 1, Edison, New Jersey 8817", "lat": 40.513532, "lng": -74.377837, "owner": "Glenny Martinez" },
      { "name": "NISSAN CITY OF SPRINGFIELD 4295/5948", "address": "146 U.S. 22, Springfield, New Jersey 7081", "lat": 40.687279, "lng": -74.318724, "owner": "Glenny Martinez" },
      { "name": "NISSAN / MERRIMACK VALLEY", "address": "95 Drum Hill Road, Chelmsford, Massachusetts 1863", "lat": 42.624703, "lng": -71.364319, "owner": "Aram Takvoryan" },
      { "name": "PERUZZI BUICK GMC SA10125", "address": "156 Lincoln Highway, Fairless Hills, Pennsylvania 19030", "lat": 40.181451, "lng": -74.862755, "owner": "Timothy Hood" },
      { "name": "AUTOFAIR NISSAN", "address": "45 Portsmouth Avenue, Stratham, New Hampshire 3885", "lat": 43.003587, "lng": -70.921187, "owner": "Aram Takvoryan" },
      { "name": "BRUCE BENNETT NISSAN OF DANBURY 5958", "address": "13 Sugar Hollow Road, Danbury, Connecticut 6810", "lat": 41.375715, "lng": -73.476095, "owner": "Aram Takvoryan" },
      { "name": "BRUCE BENNETT INFINITI OF DANBURY 70586", "address": "13 Sugar Hollow Road, Danbury, Connecticut 6810", "lat": 41.375715, "lng": -73.476095, "owner": "Aram Takvoryan" },
      { "name": "EMPIRE NISSAN BAY RIDGE", "address": "6501 5th Avenue, Brooklyn, New York 11220", "lat": 40.636402, "lng": -74.019166, "owner": "Shane Marshall" },
      { "name": "BANISTER FORD OF MARLOW HEIGHTS /SA10131", "address": "5000 Auth Road, Camp Springs, Maryland 20746", "lat": 38.822906, "lng": -76.920247, "owner": "Rachel Shifflett-Engler" },
      { "name": "HERTRICH INFINITI NEWARK", "address": "303 East Cleveland Avenue, Newark, Delaware 19711", "lat": 39.686614, "lng": -75.739871, "owner": "Timothy Hood" },
      { "name": "HERTRICH NISSAN OF NEWARK", "address": "303 East Cleveland Avenue, Newark, Delaware 19711", "lat": 39.686614, "lng": -75.739871, "owner": "Timothy Hood" },
      { "name": "SILVER LINE AUTO GROUP /SA10136", "address": "7020 Northern Boulevard, Queens, New York 11372", "lat": 40.739186, "lng": -73.893405, "owner": "Shane Marshall" },
      { "name": "ANNAPOLIS NISSAN, LLC", "address": "2542 Riva Road, Annapolis, Maryland 21401", "lat": 38.980005, "lng": -76.548718, "owner": "Rachel Shifflett-Engler" },
      { "name": "VISION NISSAN GREECE", "address": "400 West Ridge Road, Rochester, New York 14615", "lat": 43.200293, "lng": -77.637488, "owner": "David Savine" },
      { "name": "VISION NISSAN CANANDAIGUA", "address": "2409 New York 332, Canandaigua, New York 14424", "lat": 42.915806, "lng": -77.301631, "owner": "David Savine" },
      { "name": "VISION NISSAN WEBSTER", "address": "785 Ridge Road, Webster, New York 14580", "lat": 43.203979, "lng": -77.478278, "owner": "David Savine" },
      { "name": "BRONX NISSAN", "address": "3660 Boston Road, The Bronx, New York 10469", "lat": 40.879866, "lng": -73.841494, "owner": "Shane Marshall" },
      { "name": "RACEWAY NISSAN / FREEHOLD", "address": "4039-4041 ROUTE 9 N, FREEHOLD, New Jersey 7728", "lat": 40.263051, "lng": -74.291877, "owner": "Glenny Martinez" },
      { "name": "INFINITI OF FLEMINGTON 72213", "address": "204 U.S. 202, Flemington, New Jersey 8822", "lat": 40.485712, "lng": -74.862367, "owner": "Timothy Hood" },
      { "name": "SAFFORD BROWN NISSAN STERLING", "address": "45155 TOWLERN PL, STERLING, Virginia 20166", "lat": 39.01046, "lng": -77.438399, "owner": "Rachel Shifflett-Engler" },
      { "name": "POUGHKEEPSIE NISSAN", "address": "1445 ROUTE 9, WAPPINGERS FALLS, New York 12590", "lat": 41.587252, "lng": -73.908632, "owner": "Shane Marshall" },
      { "name": "YONKERS AUTO GALLERY, LLC /SA10174", "address": "1980 Central Park Avenue, Yonkers, New York 10710", "lat": 40.965862, "lng": -73.837873, "owner": "Glenny Martinez" },
      { "name": "ELITE MITSUBISHI /SM35198", "address": "134-10 Atlantic Avenue, Queens, New York 11419", "lat": 40.696861, "lng": -73.814788, "owner": "Shane Marshall" },
      { "name": "JIM COLEMAN NISSAN SILVER SPRING", "address": ", , Maryland ", "lat": 38.946658, "lng": -76.674494, "owner": "Rachel Shifflett-Engler" },
      { "name": "ROUTE 2 MITSUBISHI /SM40018", "address": ", , Rhode Island ", "lat": 41.597419, "lng": -71.527272, "owner": "Aram Takvoryan" },
      { "name": "AUTO GIANTS TEMPLE HILLS SA10178", "address": "4600 Branch Avenue, Temple Hills, Maryland 20748", "lat": 38.828918, "lng": -76.927746, "owner": "Rachel Shifflett-Engler" },
      { "name": "INFINITI CITY OF QUEENS", "address": "21707 NORTHERN BLVD, BAYSIDE, New York 11361", "lat": 40.761147, "lng": -73.764502, "owner": "Shane Marshall" },
      { "name": "PLATINUM MOTORS TOMS RIVER /SB30033", "address": "810 ROUTE 37 WEST, TOMS RIVER, New Jersey 8755", "lat": 39.971595, "lng": -74.235612, "owner": "Glenny Martinez" },
      { "name": "PLATINUM MOTORS FREEHOLD /SB30034", "address": "504 US HWY 9 SOUTH, Freehold, New Jersey 7728", "lat": 40.212125, "lng": -74.260321, "owner": "Glenny Martinez" },
      { "name": "WATERTOWN MITSUBISHI /SM07066", "address": "724 Straits Turnpike, Watertown, Connecticut 6795", "lat": 41.572002, "lng": -73.09977, "owner": "Glenny Martinez" },
      { "name": "EMPIRE NISSAN OF HILLSIDE 6006", "address": "56 ROUTE 22 EAST, HILLSIDE, New Jersey 7205", "lat": 40.696295, "lng": -74.219881, "owner": "Glenny Martinez" },
      { "name": "SMITHTOWN NISSAN", "address": "926 MIDDLE COUNTRY RD, SAINT JAMES, New York 11780", "lat": 40.860829, "lng": -73.142031, "owner": "Shane Marshall" },
      { "name": "MILFORD MITSUBISHI SM07065", "address": "750 Bridgeport Ave, Milford, Connecticut 6460", "lat": 41.211754, "lng": -73.08196, "owner": "Aram Takvoryan" },
      { "name": "TODD NISSAN OF TORRINGTON 4380/6019", "address": "522 Winsted Road, Torrington, Connecticut 6790", "lat": 41.82692, "lng": -73.110764, "owner": "Glenny Martinez" },
      { "name": "EASTERNS NISSAN OF WHITE MARSH", "address": "5361 Nottingridge Road, White Marsh, Maryland 21162", "lat": 39.373448, "lng": -76.444571, "owner": "Rachel Shifflett-Engler" },
      { "name": "NUCAR NISSAN OF KEENE", "address": "544 MONADNOCK HWY, SWANZEY, New Hampshire 3446", "lat": 42.879859, "lng": -72.234173, "owner": "Aram Takvoryan" },
      { "name": "INFINITI ARDMORE", "address": "130 SIBLEY AVE, ARDMORE, Pennsylvania 19003", "lat": 40.006338, "lng": -75.284838, "owner": "Timothy Hood" },
      { "name": "ROMEO NISSAN, LLC", "address": "140 New York 28, Kingston, New York 12401", "lat": 41.948976, "lng": -74.031825, "owner": "David Savine" },
      { "name": "INFINITI CITY MASSAPEQUA", "address": "4450 SUNRISE HWY, MASSAPEQUA, New York 11758", "lat": 40.675786, "lng": -73.469882, "owner": "Shane Marshall" },
      { "name": "INFINITI OF WHITE PLAINS", "address": "500 Tarrytown Road, White Plains, New York 10607", "lat": 41.043871, "lng": -73.801739, "owner": "Glenny Martinez" },
      { "name": "NUCAR NISSAN OF ALLENTOWN 1316/6043", "address": "1648 PLAZA LANE, ALLENTOWN, Pennsylvania 18104", "lat": 40.621101, "lng": -75.502324, "owner": "Timothy Hood" },
      { "name": "NIELSEN NISSAN DENVILLE", "address": "3057 ROUTE 10, DENVILLE, New Jersey 7834", "lat": 40.864564, "lng": -74.506459, "owner": "Glenny Martinez" },
      { "name": "CENTEREACH AUTO SUPERCENTER SA10189", "address": "1790 Middle Country Rd, Centereach, New York 11720", "lat": 40.859529, "lng": -73.075579, "owner": "Shane Marshall" },
      { "name": "INFINITI OF SMITHTOWN 5008/71016", "address": "587 MIDDLE COUNTRY RD, SAINT JAMES, New York 11780", "lat": 40.86047, "lng": -73.158829, "owner": "Shane Marshall" },
      { "name": "FAMILY NISSAN 3662/6069", "address": "600 BURNSIDE AVE, INWOOD, New York 11096", "lat": 40.622175, "lng": -73.74289, "owner": "Shane Marshall" },
      { "name": "BERTERA NISSAN MANCHESTER 6070", "address": "30 TOLLAND TURNPIKE, MANCHESTER, Connecticut 6040", "lat": 41.814221, "lng": -72.507794, "owner": "Aram Takvoryan" },
      { "name": "QUALITY AUTO CENTER SB30041", "address": "345 U.S. 22, Springfield, New Jersey 7081", "lat": 40.684462, "lng": -74.331925, "owner": "Glenny Martinez" },
      { "name": "MASERATI OF BERGEN COUNTY SB30042", "address": "145 New Jersey 17, Upper Saddle River, New Jersey 7458", "lat": 41.046639, "lng": -74.117299, "owner": "Glenny Martinez" },
      { "name": "BELLA NISSAN OF PITTSFIELD", "address": "25 West Housatonic Street, Pittsfield, Massachusetts 1201", "lat": 42.445104, "lng": -73.256252, "owner": "Aram Takvoryan" },
      { "name": "NUCAR INFINITI OF ALLENTOWN", "address": "1648 Plaza Lane, Allentown, Pennsylvania 18104", "lat": 40.621101, "lng": -75.502324, "owner": "Timothy Hood" }
    ];

    // Assign colors to each Account Owner
    var ownerColors = {
      "Rachel Shifflett-Engler": "red",
      "Aram Takvoryan": "blue",
      "David Savine": "green",
      "Shane Marshall": "purple",
      "Timothy Hood": "orange",
      "Glenny Martinez": "yellow",
      "Sandra Snyder": "pink"
    };

    // Store markers in a layer group for easy clearing
    var markersLayer = L.layerGroup().addTo(map);

    // Function to update markers based on selected owner and state
    function updateMarkers(selectedOwner, selectedState) {
      markersLayer.clearLayers(); // Clear existing markers
      dealerships.forEach(function(dealer) {
        var dealerState = dealer.address.split(', ').slice(-2, -1)[0];
        if ((selectedOwner === "All" || dealer.owner === selectedOwner) &&
            (selectedState === "All" || dealerState === selectedState)) {
          var markerIcon = L.divIcon({
            className: "custom-icon",
            html: `<div style="background-color: ${ownerColors[dealer.owner]}; width: 20px; height: 20px; border-radius: 50%; border: 2px solid white;"></div>`,
            iconSize: [20, 20]
          });
          var marker = L.marker([dealer.lat, dealer.lng], { icon: markerIcon }).addTo(markersLayer);
          marker.bindPopup("<b>" + dealer.name + "</b><br>" + dealer.address + "<br>Owner: " + dealer.owner);
          marker.on('mouseover', function() {
            marker.openPopup();
          });
          marker.on('mouseout', function() {
            marker.closePopup();
          });
        }
      });
    }

    // Initial load with all markers
    updateMarkers("All", "All");

    // Event listener for dropdown change
    document.getElementById("ownerFilter").addEventListener("change", function() {
      var selectedOwner = this.value;
      var selectedState = document.getElementById("stateFilter").value;
      updateMarkers(selectedOwner, selectedState);
    });

    document.getElementById("stateFilter").addEventListener("change", function() {
      var selectedState = this.value;
      var selectedOwner = document.getElementById("ownerFilter").value;
      updateMarkers(selectedOwner, selectedState);
    });

    // Adjust map view on window resize
    window.addEventListener('resize', function() {
      map.invalidateSize();
    });
  </script>
</body>
</html>
